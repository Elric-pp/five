var app=angular.module("app",[]);app.controller("appCtrl",["$scope",function(e){e.index=1,e.changeIndex=function(o){e.index=o},e.globalTip={on:!1,tip:""},e.myalter=function(o){e.globalTip.on=!0,e.globalTip.tip=o,$timeout(function(){e.globalTip.on=!1},1500)}}]),app.controller("groupCtrl",["$scope","groupService",function(e,o){}]),app.controller("homeCtrl",["$scope","homeService",function(e,o){e.tabIndex=1,e.changeTab=function(o){e.tabIndex=o}}]),app.controller("loginCtrl",["$scope","$timeout","loginService",function(e,o,n){e.userName="",e.passwd="",e.login=function(){var r=n.login(e.userName,e.passwd);r.success(function(n){console.log(n),e.myalter(n.msg),0==n.status&&o(function(){window.location=n.redirect},1e3)}).error(function(o){console.log(o),e.myalter("出错了")})},e.regPage=!1,e.reg={username:"",passwd:"",repasswd:"",regis:function(){if(e.reg.passwd!==e.reg.repasswd)return e.myalter("两次密码不一致"),!1;var o=n.regis(e.reg.username,e.reg.passwd);o.success(function(o){console.log(o),0==o.status?(e.regPage=!1,e.myalter("注册成功"),e.reg.username="",e.reg.passwd="",e.reg.repasswd=""):e.myalter("用户已存在")})}},e.globalTip={on:!1,tip:""},e.myalter=function(n){e.globalTip.on=!0,e.globalTip.tip=n,o(function(){e.globalTip.on=!1},1500)}}]),app.controller("userCtrl",["$scope","userService",function(e,o){}]),app.service("groupService",["$http",function(e){}]),app.service("homeService",["$http",function(e){}]),app.service("loginService",["$http",function(e){this.login=function(o,n){var r="/users/login";return e.post(r,"username="+o+"&password="+n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},this.regis=function(o,n){var r="/users/regis";return e.post(r,"username="+o+"&password="+n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}}]),app.service("userService",["$http",function(e){}]);