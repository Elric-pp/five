var app=angular.module("app",[]);app.controller("appCtrl",["$scope",function(e){e.index=1,e.changeIndex=function(r){e.index=r},e.globalTip={on:!1,tip:""},e.myalter=function(r){e.globalTip.on=!0,e.globalTip.tip=r,$timeout(function(){e.globalTip.on=!1},1500)}}]),app.controller("groupCtrl",["$scope","groupService",function(e,r){}]),app.controller("homeCtrl",["$scope","homeService",function(e,r){e.tabIndex=1,e.changeTab=function(r){e.tabIndex=r}}]),app.controller("loginCtrl",["$scope","$timeout","loginService",function(e,r,n){e.userName="",e.passwd="",e.login=function(){if(""==e.username||""==e.passwd)return e.myalter("用户名或密码不能为空"),!1;var o=n.login(e.userName,e.passwd);o.success(function(n){console.log(n),e.myalter(n.msg),0==n.status&&r(function(){window.location=n.redirect},1e3)}).error(function(r){console.log(r),e.myalter("出错了")})},e.regPage=!1,e.reg={username:"",passwd:"",repasswd:"",regis:function(){if(""==e.reg.username||""==e.reg.passwd||""==e.reg.repasswd)return e.myalter("必填字段不能为空"),!1;if(e.reg.passwd.length<=8)return e.myalter("密码太短"),!1;if(e.reg.passwd!==e.reg.repasswd)return e.myalter("两次密码不一致"),!1;var r=n.regis(e.reg.username,e.reg.passwd);r.success(function(r){console.log(r),0==r.status?(e.regPage=!1,e.myalter("注册成功"),e.reg.username="",e.reg.passwd="",e.reg.repasswd=""):e.myalter("用户已存在")})}},e.globalTip={on:!1,tip:""},e.myalter=function(n){e.globalTip.on=!0,e.globalTip.tip=n,r(function(){e.globalTip.on=!1},1500)}}]),app.controller("userCtrl",["$scope","userService",function(e,r){}]),app.service("groupService",["$http",function(e){}]),app.service("homeService",["$http",function(e){}]),app.service("loginService",["$http",function(e){this.login=function(r,n){var o="/users/login";return e.post(o,"username="+r+"&password="+n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},this.regis=function(r,n){var o="/users/regis";return e.post(o,"username="+r+"&password="+n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}}]),app.service("userService",["$http",function(e){}]);